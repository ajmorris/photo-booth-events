(()=>{"use strict";const e=window.wp.blocks,t=window.React,o=window.wp.i18n,a=window.wp.blockEditor,l=window.wp.components,r=window.wp.data,n=window.wp.element;window.wp.serverSideRender;const i=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"virtual-photo-booth/photo-booth","title":"Photo Booth","category":"media","icon":"camera","description":"Display a virtual photo booth interface with camera capture and frame overlay.","keywords":["photo","booth","camera","capture"],"textdomain":"virtual-photo-booth","attributes":{"eventId":{"type":"integer","default":0},"frameId":{"type":"integer","default":0},"showGalleryLink":{"type":"boolean","default":true},"containerClass":{"type":"string","default":""}},"supports":{"html":false,"align":["wide","full"]},"editorScript":"file:./index.js","editorStyle":"file:./editor.css","style":"file:./style.css"}');(0,e.registerBlockType)(i.name,{...i,edit:function({attributes:e,setAttributes:i}){const{eventId:s,frameId:c,showGalleryLink:p,containerClass:h}=e,m=(0,a.useBlockProps)(),[d,u]=(0,n.useState)([]),[b,v]=(0,n.useState)(!0);(0,n.useEffect)(()=>{fetch("/wp-json/virtual-photo-booth/v1/events").then(e=>e.json()).then(e=>{u(e),v(!1)}).catch(()=>{v(!1)})},[]);const w=(0,r.useSelect)(e=>c?e("core").getMedia(c):null,[c]);return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(a.InspectorControls,null,(0,t.createElement)(l.PanelBody,{title:(0,o.__)("Photo Booth Settings","virtual-photo-booth")},(0,t.createElement)(l.SelectControl,{label:(0,o.__)("Event","virtual-photo-booth"),value:s||0,options:[{label:(0,o.__)("— Use Default —","virtual-photo-booth"),value:0},...d.map(e=>({label:e.title,value:e.id}))],onChange:e=>i({eventId:parseInt(e,10)||0}),disabled:b}),(0,t.createElement)(l.TextControl,{label:(0,o.__)("Frame Image ID","virtual-photo-booth"),value:c||"",onChange:e=>i({frameId:parseInt(e,10)||0}),help:(0,o.__)("Enter a media library image ID to use as a frame overlay.","virtual-photo-booth")}),(0,t.createElement)(l.ToggleControl,{label:(0,o.__)("Show Gallery Link","virtual-photo-booth"),checked:p,onChange:e=>i({showGalleryLink:e})}),(0,t.createElement)(l.TextControl,{label:(0,o.__)("Container CSS Class","virtual-photo-booth"),value:h,onChange:e=>i({containerClass:e})}))),(0,t.createElement)("div",{...m},(0,t.createElement)("div",{className:"pbe-photo-booth-preview"},(0,t.createElement)("div",{className:"pbe-preview-camera"},(0,t.createElement)("div",{className:"pbe-camera-placeholder"},(0,t.createElement)("span",{className:"dashicons dashicons-camera"}),(0,t.createElement)("p",null,(0,o.__)("Camera Preview","virtual-photo-booth"))),w&&(0,t.createElement)("div",{className:"pbe-frame-preview"},(0,t.createElement)("img",{src:w.source_url,alt:(0,o.__)("Frame Preview","virtual-photo-booth"),style:{maxWidth:"100%",opacity:.5}}))),(0,t.createElement)("div",{className:"pbe-preview-controls"},(0,t.createElement)("button",{className:"button",disabled:!0},(0,o.__)("Capture","virtual-photo-booth")),(0,t.createElement)("button",{className:"button",disabled:!0},(0,o.__)("Retake","virtual-photo-booth")),(0,t.createElement)("button",{className:"button",disabled:!0},(0,o.__)("Upload","virtual-photo-booth"))),(0,t.createElement)("p",{className:"pbe-preview-note"},(0,o.__)("Photo booth interface will appear on the frontend.","virtual-photo-booth")))))}})})();